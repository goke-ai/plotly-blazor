@page "/plotly"

<h3>Plotly</h3>

<div class="container">
    <div class="row">
        <div class="col-6">
            <PlotlyLineChart Chart="chart" />
        </div>
        <div class="col-6">
            <PlotlyBarChart Chart="barChart" />
        </div>
        <div class="col-6">
            <PlotlyBarChart Chart="barGradeChart" />
        </div>
        <div class="col-6">
            <PlotlyBarChart Chart="barGroupChart" />
        </div>
        <div class="col-6">
            <PlotlyBarChart Chart="lineChart" />
        </div>
        <div class="col-6">
            <PlotlyPieChart Chart="pieChart" />
        </div>
        <div class="col-6">
            <PlotlyPieChart Chart="donutChart" />
        </div>
    </div>
</div>

@code {
    ElementReference BarChart;


    public Goke.Plotly.Blazor.Chart chart;
    public List<double[][]> sampleData { get; set; }
    public List<Goke.Plotly.Blazor.ChartDataSet> datasets { get; set; }

    public Goke.Plotly.Blazor.Chart barChart = new Chart
    {
        Traces = Trace.BarSample,
        Layout = new Layout
        {
            Title = "Grades",
            // Xaxis = new XYAxis { Tickangle = -45 },
            Showlegend = true,
        },
        Config = new Config { Responsive = true },
    };

    public Goke.Plotly.Blazor.Chart barGradeChart = new Chart
    {
        Traces = Trace.BarGradeSample,
        Layout = new Layout
        {
            Title = "Grades",
            // Xaxis = new XYAxis { Tickangle = -45 },
            Showlegend = true,
        },
        Config = new Config { Responsive = true },
    };

    public Goke.Plotly.Blazor.Chart barGroupChart = new Chart
    {
        Traces = Trace.BarGroupSample,
        Layout = new Layout
        {
            Title = "2013 Sales Report",
            // Font = new Font { Family = "Raleway, sans-serif" },
            // Showlegend = false,
            Xaxis = new XYAxis { Tickangle = -45 },
            Barmode = Goke.Plotly.Blazor.BarMode.Group,
        },
        Config = new Config { Responsive = true },
    };

    public Goke.Plotly.Blazor.Chart lineChart = new Chart
    {
        Traces = Trace.LineSample,
        Layout = new Layout
        {
            Title = "Line and Scatter Styling",
        },
        Config = new Config { Responsive = true },
    };

    public Goke.Plotly.Blazor.Chart pieChart = new Chart
    {
        Traces = Trace.PieSample,
        Layout = new Layout
        {
            Title = "Basic Pie",
            Height = 400,
            Width = 500,
        },
        Config = new Config { Responsive = true },
    };

    public Goke.Plotly.Blazor.Chart donutChart = new Chart
    {
        Traces = Trace.DonutSample,
        Layout = new Layout
        {
            Title = "Global Emissions 1990-2011",
            //Height = 400,
            //Width = 600,
            Annotations = new Annotation[]
            {
                new Annotation
                {
                    Font = new Font{Size=20},
                    Showarrow=false,
                    Text="GHG",
                    X=0.17F,
                    Y=0.5F,
                },
                new Annotation
                {
                    Font = new Font{Size=20},
                    Showarrow=false,
                    Text="CO2",
                    X=0.82F,
                    Y=0.5F,
                },
            },
            Showlegend = false,
            Grid = new Grid { Rows = 1, Columns = 2 },
        },
        Config = new Config { Responsive = true },
    };

    protected override void OnInitialized()
    {
        sampleData = new List<double[][]>();

        sampleData.Add(new double[][] {
            new double[]{ 0.0, 0.1, 0.2, 0.3},
            new double[]{ 1.0, 1.1, 1.2, 1.3},
            new double[]{ 2.0, 2.1, 2.2, 2.3},
            new double[]{ 3.0, 3.1, 3.2, 3.3},
        });

        datasets = (from record in sampleData
                    select new Goke.Plotly.Blazor.ChartDataSet
                    {
                        Name = "Test",
                        Data = (from r in record
                                let y = new object[] { r[0], r[2] }
                                select y.ToArray())
                         .ToArray()
                    }).ToList();

        chart = new Goke.Plotly.Blazor.Chart
        {
            DataSets = datasets,
            Title = "Line Chart",
            XLabel = "X-Axis",
            YLabel = "Y-Axis",
        };
    }


}
